const expresiones={email:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,nombre:/^[a-zA-ZÀ-ÿ\s]{1,40}$/,mensaje:/^[a-zA-Z0-9\.\!\@\_\s\?\¿\¡\'\$\(\)\"]{4,250}$/},campos={email:!1,nombre:!1,mensaje:!1};function iniciarApp(){bienvenida(),navMenu(),openChat(),sendMessage(),scrollNav(),validaciones(),scrollNavBtn()}function bienvenida(){document.querySelector("#btn-bienvenida").addEventListener("click",()=>{const e=document.querySelector("#body"),t=document.querySelector("#app"),o=document.querySelector("#header"),n=document.querySelector("#nav"),a=document.querySelector("#footer"),c=document.querySelector("#main"),s=document.querySelector("#contacto-flotante");e.classList.add("body"),t.classList.add("hidden"),o.classList.remove("hidden"),n.classList.remove("hidden"),a.classList.remove("hidden"),c.classList.remove("hidden"),s.classList.remove("hidden")})}function navMenu(){const e=document.querySelector("#navMenu");e.addEventListener("click",()=>{const t=document.querySelector("#nav");t.classList.contains("hidden-nav")?(t.classList.remove("hidden-nav"),t.classList.add("visible")):(t.classList.add("hidden-nav"),t.classList.remove("visible")),e.classList.toggle("active")})}function validaciones(){document.getElementById("form");const e=document.getElementById("submit"),t=document.querySelectorAll("#form .campo input"),o=document.querySelector("#mensaje"),n=document.getElementById("campo_email"),a=document.getElementById("campo_nombre"),c=document.getElementById("campo_mensaje"),s=(e,t,o,n)=>{e.test(o.value)?(t.classList.remove(`campo_${n}-error`),t.classList.remove("campo_error"),t.classList.add(`campo_${n}-correcto`),t.classList.add("campo_correcto"),campos[n]=!0):(t.classList.remove("campo_correcto"),t.classList.remove(`campo_${n}-correcto`),t.classList.add("campo_error"),t.classList.add(`campo_${n}-error`),campos[n]=!1)},r=e=>{switch(e.target.name){case"email":s(expresiones.email,n,e.target,"email");break;case"nombre":s(expresiones.nombre,a,e.target,"nombre");break;case"mensaje":s(expresiones.mensaje,c,e.target,"mensaje")}};t.forEach(e=>{e.addEventListener("keyup",r),e.addEventListener("blur",r)}),o.addEventListener("keyup",r),o.addEventListener("blur",r),e.onclick=e=>{e.preventDefault(),campos.email&&campos.nombre&&campos.mensaje?submit():Swal.fire({icon:"error",title:"Error",text:"Tu mensaje no pudo ser enviado. Porfavor revisa bien los campos"})}}async function submit(){const e=document.querySelector("#email"),t=document.querySelector("#nombre"),o=document.querySelector("#mensaje"),n=new FormData;n.append("email",e.value),n.append("nombre",t.value),n.append("mensaje",o.value);const a=await fetch("http://localhost:3000/api/mensajes",{method:"POST",body:n});(await a.json()).resultado?Swal.fire({icon:"success",title:"Mensaje Enviado",text:"Recibiras una respuesta por email",timer:2e3}):Swal.fire({icon:"error",title:"Error",text:"Hubo un error en el servidor interno. Porfavor contacta mediante el boton de WhatsApp."})}function openChat(){const e=document.querySelector("#contacto-flotante"),t=document.querySelector(".window_chat"),o=document.querySelector("#modal");e.addEventListener("click",()=>{t.classList.toggle("active"),o.classList.toggle("active"),e.classList.contains("contacto-flotante")?(e.classList.remove("contacto-flotante"),e.classList.add("contacto-flotanteJS")):e.classList.contains("contacto-flotanteJS")&&(e.classList.remove("contacto-flotanteJS"),e.classList.add("contacto-flotante"))})}function sendMessage(){document.querySelector("#btn-send").addEventListener("click",()=>{const e=document.getElementById("input-send").value.replace(/ /g,"%20");window.open("https://wa.me/+541125846944?text="+e,"_blank")})}function scrollNav(){document.querySelectorAll("#nav a").forEach(e=>e.addEventListener("click",(function(e){e.preventDefault();const t=e.target.attributes.href.value;document.querySelector(t).scrollIntoView({behavior:"smooth"})})))}function scrollNavBtn(){document.querySelectorAll(".hero a").forEach(e=>e.addEventListener("click",(function(e){e.preventDefault();const t=e.target.attributes.href.value;document.querySelector(t).scrollIntoView({behavior:"smooth"})})))}document.addEventListener("DOMContentLoaded",()=>{iniciarApp()});